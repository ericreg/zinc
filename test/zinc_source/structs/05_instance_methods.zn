// Test: Instance methods and self mutability
// - Methods that read self get &self
// - Methods that write to self get &mut self

struct Counter {
    count: 0
    step: 1

    // Instance method - reads self (becomes &self)
    fn get_count() {
        return self.count
    }

    // Instance method - reads self (becomes &self)
    fn get_step() {
        return self.step
    }

    // Instance method - writes to self (becomes &mut self)
    fn increment() {
        self.count = self.count + self.step
    }

    // Instance method - writes to self (becomes &mut self)
    fn reset() {
        self.count = 0
    }

    // Instance method - writes to self (becomes &mut self)
    fn set_step(new_step) {
        self.step = new_step
    }

    // Static constructor
    fn new(initial, step) {
        return Counter { count: initial, step: step }
    }
}

fn main() {
    counter = Counter.new(0, 5)

    // Read initial value
    print(counter.get_count())

    // Increment a few times
    counter.increment()
    print(counter.get_count())

    counter.increment()
    print(counter.get_count())

    // Change step and increment
    counter.set_step(10)
    counter.increment()
    print(counter.get_count())

    // Reset
    counter.reset()
    print(counter.get_count())
}
